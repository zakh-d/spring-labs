services:
    gateway:
        build: gateway
        platform: linux/amd64
        environment:
            - server.port=80
            - workouts.gateway.host=gateway
            - workouts.workouts-microservice.url=http://workouts
            - workouts.exercises-microservice.url=http://exercises
    workouts:
        build: workout-microservice
        platform: linux/amd64
        depends_on:
            - exercises
        environment:
            - server.port=80
            - workouts.exercises-microservice.url=http://exercises
    exercises:
        build: exercise-microservice
        platform: linux/amd64
        environment:
            - server.port=80
    frontend:
        build: 
            context: frontend
            args:
                - VITE_API_HOST=localhost:8080
        ports:
            - 8080:80
        environment:
            - API_URL=http://gateway
            - API_HOST=gateway